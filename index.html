<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#2d5016">
  <title>Golf Round Analyzer â›³ v9</title>
  
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Bebas+Neue&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --green-primary: #2d5016;
      --green-secondary: #4a7c23;
      --green-light: #7fb069;
      --cream: #fffbf3;
      --sand: #e5dcc5;
      --brown: #5c4a3a;
      --red: #c44536;
      --blue: #4a90e2;
      --shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(to bottom, var(--cream) 0%, var(--sand) 100%);
      color: var(--brown);
      -webkit-font-smoothing: antialiased;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }

    #app {
      max-width: 600px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .page-container {
      flex: 1;
      padding: 24px;
      padding-bottom: 100px;
      overflow-y: auto;
    }

    /* Back Button */
    .back-button {
      position: fixed;
      top: 16px;
      left: 16px;
      width: 40px;
      height: 40px;
      background: white;
      border: 2px solid var(--green-primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow);
      z-index: 999;
      font-size: 20px;
      color: var(--green-primary);
      transition: all 0.2s;
    }

    .back-button:hover {
      background: var(--green-primary);
      color: white;
    }

    .page-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--green-primary);
      margin-bottom: 20px;
      font-family: 'Bebas Neue', cursive;
      letter-spacing: 1px;
      text-align: center;
    }

    .section {
      margin-bottom: 24px;
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: var(--shadow);
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--green-primary);
      margin-bottom: 16px;
    }

    /* Shot Info Header */
    .shot-header {
      background: white;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: var(--shadow);
    }

    .shot-info {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }

    .hole-num {
      font-size: 16px;
      font-weight: 600;
      color: var(--green-primary);
    }

    .tee-badge {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      background: var(--blue);
      color: white;
    }

    .tee-badge.white {
      background: #888;
    }

    .distance-badge {
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      background: var(--sand);
      color: var(--brown);
    }

    .shot-number {
      font-size: 20px;
      font-weight: 700;
      color: var(--green-primary);
      margin-top: 8px;
    }

    /* Previous Shots */
    .previous-shots {
      background: var(--sand);
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
    }

    .prev-shot {
      margin-bottom: 4px;
      opacity: 0.8;
    }

    .prev-shot:last-child {
      margin-bottom: 0;
    }

    /* Input Sections */
    .input-section {
      margin-bottom: 20px;
    }

    .input-section label {
      display: block;
      font-size: 15px;
      font-weight: 600;
      color: var(--brown);
      margin-bottom: 10px;
    }

    .optional-label {
      font-size: 13px;
      font-weight: 400;
      opacity: 0.6;
    }

    .text-input {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--sand);
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Noto Sans KR', sans-serif;
    }

    .text-input:focus {
      outline: none;
      border-color: var(--green-primary);
    }

    /* ê±°ë¦¬ ì…ë ¥ í™”ì‚´í‘œ ì œê±° */
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"] {
      -moz-appearance: textfield;
    }

    .select-input {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--sand);
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Noto Sans KR', sans-serif;
      background: white;
    }

    /* Buttons */
    .primary-btn {
      width: 100%;
      padding: 16px;
      background: var(--green-primary);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .primary-btn:hover {
      background: var(--green-secondary);
    }

    .primary-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .secondary-btn {
      width: 100%;
      padding: 16px;
      background: white;
      color: var(--green-primary);
      border: 2px solid var(--green-primary);
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 12px;
    }

    .secondary-btn:hover {
      background: var(--green-light);
      color: white;
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .button-group-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }

    .choice-btn {
      padding: 12px;
      background: white;
      border: 2px solid var(--sand);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
      font-weight: 500;
    }

    .choice-btn:hover {
      border-color: var(--green-light);
    }

    .choice-btn.selected {
      background: var(--green-primary);
      color: white;
      border-color: var(--green-primary);
    }

    /* Checkbox Group for Multiple Selection */
    .checkbox-group {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px;
      background: white;
      border: 2px solid var(--sand);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
    }

    .checkbox-label:hover {
      border-color: var(--green-light);
    }

    .checkbox-label.selected {
      background: var(--green-primary);
      color: white;
      border-color: var(--green-primary);
    }

    .checkbox-label input[type="checkbox"] {
      display: none;
    }

    /* Club Recommendation */
    .club-recommendation {
      background: #e3f2fd;
      border-left: 4px solid var(--blue);
      padding: 12px;
      margin-bottom: 16px;
      border-radius: 4px;
      font-size: 14px;
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid var(--blue);
      padding: 12px;
      margin-bottom: 16px;
      border-radius: 4px;
      font-size: 14px;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      max-width: 600px;
      margin: 0 auto;
      background: white;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      border-top: 1px solid var(--sand);
      box-shadow: 0 -4px 12px rgba(0,0,0,0.05);
      z-index: 1000;
    }

    .nav-btn {
      border: none;
      background: transparent;
      padding: 12px 8px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      transition: all 0.2s;
      color: var(--brown);
      opacity: 0.6;
    }

    .nav-btn.active {
      color: var(--green-primary);
      opacity: 1;
    }

    .nav-btn-icon {
      font-size: 24px;
    }

    .nav-btn-label {
      font-size: 11px;
      font-weight: 500;
    }

    /* Stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      text-align: center;
    }

    .stat-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }

    .stat-label {
      font-size: 13px;
      color: var(--brown);
      opacity: 0.7;
      margin-bottom: 8px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--green-primary);
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      opacity: 0.6;
    }

    .empty-state p {
      margin-bottom: 8px;
    }

    /* Rounds List */
    .rounds-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .round-card {
      background: white;
      padding: 16px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .round-header-info h3 {
      font-size: 16px;
      color: var(--green-primary);
      margin-bottom: 4px;
    }

    .round-date {
      font-size: 13px;
      opacity: 0.6;
    }

    .round-score-info {
      text-align: right;
    }

    .total-score {
      font-size: 28px;
      font-weight: 700;
      color: var(--green-primary);
    }

    .club-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }

    .club-item {
      padding: 10px;
      background: var(--sand);
      border-radius: 8px;
      font-size: 14px;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      padding: 16px;
      border-radius: 16px;
      max-width: 480px;
      width: 94%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 22px;
      font-weight: 700;
      color: var(--green-primary);
    }

    .close-btn {
      font-size: 28px;
      font-weight: bold;
      color: var(--brown);
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
      width: 32px;
      height: 32px;
    }

    /* Course Selection */
    .course-btn {
      width: 100%;
      padding: 16px;
      background: white;
      border: 2px solid var(--sand);
      border-radius: 12px;
      text-align: left;
      cursor: pointer;
      margin-bottom: 12px;
      transition: all 0.2s;
    }

    .course-btn:hover {
      border-color: var(--green-primary);
    }

    .course-name {
      font-size: 16px;
      font-weight: 600;
      color: var(--green-primary);
      margin-bottom: 4px;
    }

    .course-details {
      font-size: 13px;
      opacity: 0.7;
    }

    /* Course Management Buttons */
    .btn-group {
      display: flex;
      gap: 8px;
    }

    .edit-btn, .delete-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Noto Sans KR', sans-serif;
    }

    .edit-btn {
      background: var(--green-primary);
      color: white;
    }

    .edit-btn:hover {
      background: var(--green-secondary);
    }

    .delete-btn {
      background: var(--red);
      color: white;
    }

    .delete-btn:hover {
      background: #a03028;
    }

    .course-info {
      flex: 1;
    }

    /* Round Control */
    .round-control-panel {
      background: var(--sand);
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .round-info {
      font-size: 14px;
      opacity: 0.8;
    }

    .finish-round-btn {
      padding: 10px 16px;
      background: var(--red);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
    }

    /* Course Registration */
    .hole-row {
      display: grid;
      grid-template-columns: 35px 60px 90px 90px;
      gap: 6px;
      margin-bottom: 8px;
      align-items: center;
    }

    .hole-number {
      text-align: center;
      font-weight: 600;
      color: var(--green-primary);
      font-size: 14px;
    }

    .hole-row select,
    .hole-row input[type="number"] {
      padding: 8px 4px;
      border: 2px solid var(--sand);
      border-radius: 6px;
      font-size: 13px;
      width: 100%;
    }

    .par-summary {
      background: var(--sand);
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .par-summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 14px;
    }

    .par-summary-row:last-child {
      margin-bottom: 0;
    }

    .par-summary-row.total {
      font-weight: 600;
      padding-top: 6px;
      border-top: 1px solid var(--brown);
      opacity: 0.3;
    }

    .section-divider {
      border-top: 2px solid var(--sand);
      margin: 16px 0;
      padding-top: 12px;
    }

    .subsection-title {
      font-size: 15px;
      font-weight: 600;
      color: var(--green-primary);
      margin-bottom: 12px;
    }

    .holes-header {
      display: grid;
      grid-template-columns: 35px 60px 90px 90px;
      gap: 6px;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 11px;
      color: var(--green-primary);
      text-align: center;
    }

    .btn-group {
      display: flex;
      gap: 8px;
    }

    .edit-btn, .delete-btn {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      border: none;
    }

    .edit-btn {
      background: var(--blue);
      color: white;
    }

    .delete-btn {
      background: var(--red);
      color: white;
    }

    .course-info {
      flex: 1;
    }

    /* Home Layout Improvement */
    .home-quick-actions {
      display: flex;
      gap: 12px;
      margin-bottom: 24px;
    }

    .home-quick-actions .secondary-btn {
      margin-bottom: 0;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script>
    // ========================================
    // DEFAULT COURSES
    // ========================================
    const DEFAULT_COURSES = [
      {
        id: 'woodville-gc',
        name: 'Woodville GC',
        location: 'Woodville',
        holes: 18,
        par: [4, 4, 3, 4, 5, 4, 3, 4, 4, 4, 4, 3, 5, 4, 4, 3, 4, 4],
        distances: {
          blue: [365, 348, 165, 375, 478, 355, 152, 368, 385, 342, 358, 158, 485, 368, 355, 148, 348, 375],
          white: [350, 335, 155, 360, 465, 340, 142, 355, 370, 330, 345, 148, 470, 355, 340, 138, 335, 360]
        }
      }
    ];

    // ========================================
    // CLUB DATA & DISTANCES
    // ========================================
    const CLUB_DISTANCES = {
      'driver': { carry: 204, total: 220, max: 230 },
      '5wood': { carry: 182, total: 198, max: 210 },
      '7wood': { carry: 170, total: 185, max: 195 },
      '4iron': { carry: 165, total: 177, max: 185 },
      '5iron': { carry: 156, total: 167, max: 175 },
      '6iron': { carry: 147, total: 155, max: 165 },
      '7iron': { carry: 137, total: 144, max: 155 },
      '8iron': { carry: 127, total: 135, max: 145 },
      '9iron': { carry: 116, total: 123, max: 135 },
      'pw': { carry: 105, total: 112, max: 125 },
      'aw': { carry: 98, total: 100, max: 115 },
      '52': { carry: 88, total: 90, max: 105 },
      '56': { carry: 81, total: 83, max: 95 },
      '60': { carry: 72, total: 73, max: 85 }
    };

    const CLUBS = [
      { id: 'driver', name: 'ë“œë¼ì´ë²„' },
      { id: '5wood', name: '5W' },
      { id: '7wood', name: '7W' },
      { id: '4iron', name: '4I' },
      { id: '5iron', name: '5I' },
      { id: '6iron', name: '6I' },
      { id: '7iron', name: '7I' },
      { id: '8iron', name: '8I' },
      { id: '9iron', name: '9I' },
      { id: 'pw', name: 'PW' },
      { id: 'aw', name: 'AW' },
      { id: '52', name: '52Â°' },
      { id: '56', name: '56Â°' },
      { id: '60', name: '60Â°' }
    ];

    // ========================================
    // APP STATE
    // ========================================
    const appState = {
      currentPage: 0,
      data: {
        rounds: [],
        courses: [...DEFAULT_COURSES]
      },
      activeRound: null,
      currentHole: 1,
      selectedTeeBox: 'blue',
      holePar: null,
      holeDistance: '',
      shots: [],
      currentShot: null,
      puttingData: null,
      showCourseModal: false,
      showRoundSummaryModal: false,
      newCourse: null,
      editingCourse: null,
      isNewCourseRound: false, // ìƒˆ ì½”ìŠ¤ ë¼ìš´ë“œ í”Œë˜ê·¸
      newCourseData: null // ìƒˆ ì½”ìŠ¤ ë¹Œë“œì—… ë°ì´í„°
    };

    // ========================================
    // LOCAL STORAGE
    // ========================================
    function saveData() {
      try {
        localStorage.setItem('golfAnalyzerV9', JSON.stringify(appState.data));
      } catch (e) {
        console.error('ì €ì¥ ì‹¤íŒ¨:', e);
        alert('ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¡œì»¬ ì„œë²„(VS Code Live Server ë“±)ë¡œ ì‹¤í–‰í•´ì£¼ì„¸ìš”.');
      }
    }

    function loadData() {
      try {
        const saved = localStorage.getItem('golfAnalyzerV9');
        if (saved) {
          appState.data = JSON.parse(saved);
        }
      } catch (e) {
        console.error('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', e);
      }
    }

    // ========================================
    // AI CLUB RECOMMENDATION
    // ========================================
    function getRecommendedClub(distance) {
      if (!distance) return null;
      
      const dist = parseInt(distance);
      let bestClub = null;
      let minDiff = Infinity;

      CLUBS.forEach(club => {
        const clubDist = CLUB_DISTANCES[club.id];
        if (clubDist && clubDist.total > 0) {
          const diff = Math.abs(clubDist.total - dist);
          if (diff < minDiff) {
            minDiff = diff;
            bestClub = club;
          }
        }
      });

      return bestClub;
    }

    // ========================================
    // RENDER MAIN
    // ========================================
    function render() {
      const app = document.getElementById('app');
      app.innerHTML = '';

      const container = document.createElement('div');
      container.className = 'page-container';

      // ë¼ìš´ë“œ ì§„í–‰ ì¤‘ì¸ ê²½ìš°
      if (appState.activeRound) {
        // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ì¶”ê°€
        const backBtn = document.createElement('button');
        backBtn.className = 'back-button';
        backBtn.innerHTML = 'â†';
        backBtn.onclick = goBack;
        app.appendChild(backBtn);

        if (appState.puttingData) {
          renderPuttingInput(container);
        } else if (appState.currentShot) {
          renderShotInput(container);
        } else {
          // Par ì…ë ¥ í™”ë©´ ë˜ëŠ” ìƒ· ì‹œì‘ ëŒ€ê¸°
          renderParInput(container);
        }
      } else {
        // ì¼ë°˜ í˜ì´ì§€
        switch (appState.currentPage) {
          case 0: renderHomePage(container); break;
          case 1: renderRoundStartPage(container); break;
          case 2: renderStatsPage(container); break;
          case 3: renderHistoryPage(container); break;
          case 4: renderSettingsPage(container); break;
        }
      }

      app.appendChild(container);

      // ë¼ìš´ë“œ ì§„í–‰ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í‘œì‹œ
      if (!appState.activeRound) {
        app.appendChild(renderBottomNav());
      }

      // ëª¨ë‹¬ ë Œë”ë§
      if (appState.showCourseModal) {
        app.appendChild(renderCourseModal());
      }
      if (appState.showRoundSummaryModal) {
        app.appendChild(renderRoundSummaryModal());
      }
    }

    // ========================================
    // BACK BUTTON
    // ========================================
    function goBack() {
      if (appState.puttingData) {
        // í¼íŒ… ì…ë ¥ -> ìƒ· ì…ë ¥ìœ¼ë¡œ
        appState.puttingData = null;
        if (appState.shots.length > 0) {
          appState.currentShot = appState.shots.pop();
        }
      } else if (appState.currentShot) {
        // ìƒ· ì…ë ¥ -> ì´ì „ ìƒ· ë˜ëŠ” Par ì…ë ¥ìœ¼ë¡œ
        if (appState.shots.length > 0) {
          appState.currentShot = appState.shots.pop();
        } else {
          appState.currentShot = null;
          appState.holePar = null;
        }
      } else if (appState.holePar) {
        // Par ì…ë ¥ -> ë¼ìš´ë“œ ì·¨ì†Œ í™•ì¸
        if (confirm('ë¼ìš´ë“œë¥¼ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
          cancelRound();
        }
      }
      render();
    }

    function cancelRound() {
      appState.activeRound = null;
      appState.currentHole = 1;
      appState.holePar = null;
      appState.holeDistance = '';
      appState.shots = [];
      appState.currentShot = null;
      appState.puttingData = null;
      appState.isNewCourseRound = false;
      appState.newCourseData = null;
      appState.currentPage = 0;
    }

    // ========================================
    // BOTTOM NAVIGATION
    // ========================================
    function renderBottomNav() {
      const nav = document.createElement('nav');
      nav.className = 'bottom-nav';

      const pages = [
        { icon: 'ğŸ ', label: 'í™ˆ' },
        { icon: 'â›³', label: 'ë¼ìš´ë“œ' },
        { icon: 'ğŸ“Š', label: 'í†µê³„' },
        { icon: 'ğŸ“‹', label: 'ê¸°ë¡' },
        { icon: 'âš™ï¸', label: 'ì„¤ì •' }
      ];

      pages.forEach((page, index) => {
        const btn = document.createElement('button');
        btn.className = `nav-btn ${appState.currentPage === index ? 'active' : ''}`;
        btn.innerHTML = `
          <div class="nav-btn-icon">${page.icon}</div>
          <div class="nav-btn-label">${page.label}</div>
        `;
        btn.onclick = () => {
          appState.currentPage = index;
          render();
        };
        nav.appendChild(btn);
      });

      return nav;
    }

    // ========================================
    // HOME PAGE
    // ========================================
    function renderHomePage(container) {
      const inProgressRound = appState.data.rounds.find(r => r.status === 'in-progress');

      container.innerHTML = `
        <h1 class="page-title">â›³ Golf Round Analyzer</h1>
        
        ${inProgressRound ? `
          <div class="section">
            <h2 class="section-title">ì§„í–‰ ì¤‘ì¸ ë¼ìš´ë“œ</h2>
            <p style="margin-bottom: 12px;">
              ${inProgressRound.course} â€¢ ${inProgressRound.holes.length}/18 í™€ ì™„ë£Œ
            </p>
            <button class="primary-btn" onclick="resumeRound()">
              ë¼ìš´ë“œ ê³„ì†í•˜ê¸°
            </button>
          </div>
        ` : ''}

        <div class="section">
          <h2 class="section-title">ìƒˆ ë¼ìš´ë“œ</h2>
          <button class="primary-btn" onclick="goToPage(1)">
            ğŸŒï¸ ìƒˆ ë¼ìš´ë“œ ì‹œì‘
          </button>
        </div>

        <div class="section">
          <h2 class="section-title">ë¹ ë¥¸ ë©”ë‰´</h2>
          <div class="home-quick-actions">
            <button class="secondary-btn" onclick="goToPage(2)">
              ğŸ“Š í†µê³„
            </button>
            <button class="secondary-btn" onclick="goToPage(3)">
              ğŸ“‹ ê¸°ë¡
            </button>
          </div>
          <button class="secondary-btn" onclick="openCourseRegistration()">
            â• ìƒˆ ì½”ìŠ¤ ë“±ë¡
          </button>
        </div>

        <div class="section" style="text-align: center;">
          <p style="opacity: 0.6; font-size: 14px;">Version 9.0.0</p>
          <p style="opacity: 0.6; font-size: 12px; margin-top: 4px;">
            í…ŒìŠ¤íŠ¸2 í”¼ë“œë°± ë°˜ì˜ â€¢ Par ì…ë ¥ ê°œì„ 
          </p>
        </div>
      `;
    }

    window.goToPage = function(page) {
      appState.currentPage = page;
      render();
    };

    window.resumeRound = function() {
      const inProgressRound = appState.data.rounds.find(r => r.status === 'in-progress');
      if (inProgressRound) {
        appState.data.rounds = appState.data.rounds.filter(r => r.status !== 'in-progress');
        appState.activeRound = inProgressRound;
        appState.currentHole = inProgressRound.holes.length + 1;
        appState.selectedTeeBox = inProgressRound.teeBox;
        render();
      }
    };

    // ========================================
    // ROUND START PAGE (NEW - ì½”ìŠ¤ ì„ íƒ / ìƒˆ ì½”ìŠ¤)
    // ========================================
    function renderRoundStartPage(container) {
      container.innerHTML = `
        <h1 class="page-title">â›³ ìƒˆ ë¼ìš´ë“œ</h1>
        
        <div class="section">
          <h2 class="section-title">ë¼ìš´ë“œ ë°©ì‹ ì„ íƒ</h2>
          
          <button class="secondary-btn" onclick="selectRoundType('existing')">
            ğŸ“‹ ì½”ìŠ¤ ì„ íƒ (ë“±ë¡ëœ ì½”ìŠ¤)
          </button>
          
          <button class="secondary-btn" onclick="selectRoundType('new')">
            â• ìƒˆ ì½”ìŠ¤ (ë¼ìš´ë“œí•˜ë©´ì„œ ë“±ë¡)
          </button>
        </div>
      `;
    }

    window.selectRoundType = function(type) {
      if (type === 'existing') {
        appState.currentPage = 10; // ê¸°ì¡´ ì½”ìŠ¤ ì„ íƒ í˜ì´ì§€
      } else {
        appState.currentPage = 11; // ìƒˆ ì½”ìŠ¤ ì…ë ¥ í˜ì´ì§€
      }
      render();
    };

    // ========================================
    // EXISTING COURSE SELECTION PAGE
    // ========================================
    function renderExistingCourseSelectionPage(container) {
      container.innerHTML = `
        <h1 class="page-title">ì½”ìŠ¤ ì„ íƒ</h1>
        
        <div class="section">
          <h2 class="section-title">ë“±ë¡ëœ ì½”ìŠ¤</h2>
          
          ${appState.data.courses.map(course => {
            const totalPar = course.par.reduce((a,b) => a+b, 0);
            
            return `
              <button class="course-btn" onclick="selectExistingCourse('${course.id}')">
                <div class="course-name">${course.name}</div>
                <div class="course-details">
                  ${course.location} â€¢ ${course.holes}í™€ â€¢ Par ${totalPar}
                </div>
              </button>
            `;
          }).join('')}
        </div>
      `;
    }

    window.selectExistingCourse = function(courseId) {
      appState.selectedCourseId = courseId;
      appState.currentPage = 12; // í‹°ë°•ìŠ¤ ì„ íƒ í˜ì´ì§€
      render();
    };

    // ========================================
    // TEEBOX SELECTION PAGE
    // ========================================
    function renderTeeboxSelectionPage(container) {
      const course = appState.data.courses.find(c => c.id === appState.selectedCourseId);

      container.innerHTML = `
        <h1 class="page-title">í‹°ë°•ìŠ¤ ì„ íƒ</h1>
        
        <div class="section">
          <h2 class="section-title">${course.name}</h2>
          
          <div class="button-group">
            <button class="choice-btn ${appState.selectedTeeBox === 'blue' ? 'selected' : ''}" 
              onclick="selectTeeBoxAndStart('blue')">
              ğŸ”µ Blue
            </button>
            <button class="choice-btn ${appState.selectedTeeBox === 'white' ? 'selected' : ''}" 
              onclick="selectTeeBoxAndStart('white')">
              âšª White
            </button>
          </div>
        </div>
      `;
    }

    window.selectTeeBoxAndStart = function(teeBox) {
      const course = appState.data.courses.find(c => c.id === appState.selectedCourseId);
      if (course) {
        appState.selectedTeeBox = teeBox;
        appState.activeRound = {
          id: Date.now(),
          courseId: course.id,
          course: course.name,
          teeBox: teeBox,
          date: new Date().toISOString(),
          holes: [],
          status: 'in-progress'
        };
        appState.currentHole = 1;
        appState.isNewCourseRound = false;
        render();
      }
    };

    // ========================================
    // NEW COURSE INPUT PAGE
    // ========================================
    function renderNewCourseInputPage(container) {
      container.innerHTML = `
        <h1 class="page-title">ìƒˆ ì½”ìŠ¤</h1>
        
        <div class="section">
          <h2 class="section-title">ì½”ìŠ¤ ì •ë³´</h2>
          
          <div class="input-section">
            <label>ì½”ìŠ¤ ì´ë¦„</label>
            <input type="text" class="text-input" id="new-course-name"
              placeholder="ì˜ˆ: ìŠ¤ì¹´ì´72 ì˜¤ì…˜">
          </div>

          <div class="input-section">
            <label>í‹°ë°•ìŠ¤ ì„ íƒ</label>
            <div class="button-group">
              <button class="choice-btn ${appState.selectedTeeBox === 'blue' ? 'selected' : ''}" 
                onclick="selectNewCourseTeeBox('blue')">
                ğŸ”µ Blue
              </button>
              <button class="choice-btn ${appState.selectedTeeBox === 'white' ? 'selected' : ''}" 
                onclick="selectNewCourseTeeBox('white')">
                âšª White
              </button>
            </div>
          </div>

          <button class="primary-btn" onclick="startNewCourseRound()">
            ë¼ìš´ë“œ ì‹œì‘
          </button>
        </div>
      `;
    }

    window.selectNewCourseTeeBox = function(teeBox) {
      appState.selectedTeeBox = teeBox;
      render();
    };

    window.startNewCourseRound = function() {
      const courseName = document.getElementById('new-course-name').value.trim();
      
      if (!courseName) {
        alert('ì½”ìŠ¤ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      appState.isNewCourseRound = true;
      appState.newCourseData = {
        id: 'course_' + Date.now(),
        name: courseName,
        location: '', // ë‚˜ì¤‘ì— ì¶”ê°€ ê°€ëŠ¥
        holes: 18,
        par: [],
        distances: {
          blue: [],
          white: []
        }
      };

      appState.activeRound = {
        id: Date.now(),
        courseId: 'new_course',
        course: courseName,
        teeBox: appState.selectedTeeBox,
        date: new Date().toISOString(),
        holes: [],
        status: 'in-progress'
      };
      
      appState.currentHole = 1;
      render();
    };

    // ========================================
    // COURSE REGISTRATION MODAL
    // ========================================
    window.openCourseRegistration = function() {
      appState.newCourse = {
        id: 'course_' + Date.now(),
        name: '',
        location: '',
        holes: 18,
        par: new Array(18).fill(4),
        distances: {
          blue: new Array(18).fill(0),
          white: new Array(18).fill(0)
        }
      };
      appState.showCourseModal = true;
      render();
    };

    window.openCourseEdit = function(courseId) {
      const course = appState.data.courses.find(c => c.id === courseId);
      if (course) {
        appState.newCourse = JSON.parse(JSON.stringify(course));
        appState.editingCourse = courseId;
        appState.showCourseModal = true;
        render();
      }
    };

    window.closeCourseModal = function() {
      appState.showCourseModal = false;
      appState.newCourse = null;
      appState.editingCourse = null;
      render();
    };

    function renderCourseModal() {
      const modal = document.createElement('div');
      modal.className = 'modal active';
      
      const course = appState.newCourse;
      
      const outPar = course.par.slice(0, 9).reduce((a,b) => a+b, 0);
      const inPar = course.holes === 18 ? course.par.slice(9, 18).reduce((a,b) => a+b, 0) : 0;
      const totalPar = course.par.reduce((a,b) => a+b, 0);
      
      const outDistBlue = course.distances.blue.slice(0, 9).reduce((a,b) => a+b, 0);
      const inDistBlue = course.holes === 18 ? course.distances.blue.slice(9, 18).reduce((a,b) => a+b, 0) : 0;
      const totalDistBlue = course.distances.blue.reduce((a,b) => a+b, 0);
      
      const outDistWhite = course.distances.white.slice(0, 9).reduce((a,b) => a+b, 0);
      const inDistWhite = course.holes === 18 ? course.distances.white.slice(9, 18).reduce((a,b) => a+b, 0) : 0;
      const totalDistWhite = course.distances.white.reduce((a,b) => a+b, 0);

      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">${appState.editingCourse ? 'ì½”ìŠ¤ ìˆ˜ì •' : 'ìƒˆ ì½”ìŠ¤ ë“±ë¡'}</h2>
            <button class="close-btn" onclick="closeCourseModal()">&times;</button>
          </div>

          <div class="input-section">
            <label>ì½”ìŠ¤ëª…</label>
            <input type="text" class="text-input" 
              value="${course.name}" 
              oninput="updateNewCourseNoRender('name', this.value)"
              placeholder="ì˜ˆ: ìŠ¤ì¹´ì´72 ì˜¤ì…˜">
          </div>

          <div class="input-section">
            <label>ìœ„ì¹˜</label>
            <input type="text" class="text-input" 
              value="${course.location}" 
              oninput="updateNewCourseNoRender('location', this.value)"
              placeholder="ì˜ˆ: ì¸ì²œ">
          </div>

          <div class="input-section">
            <label>í™€ ìˆ˜</label>
            <select class="select-input" value="${course.holes}" 
              onchange="updateNewCourse('holes', parseInt(this.value))">
              <option value="9" ${course.holes === 9 ? 'selected' : ''}>9í™€</option>
              <option value="18" ${course.holes === 18 ? 'selected' : ''}>18í™€</option>
            </select>
          </div>

          <div class="par-summary">
            <div class="par-summary-row">
              <span class="par-summary-label">Out (1-9í™€):</span>
              <span class="par-summary-value">Par ${outPar} / Blue ${outDistBlue}m / White ${outDistWhite}m</span>
            </div>
            ${course.holes === 18 ? `
              <div class="par-summary-row">
                <span class="par-summary-label">In (10-18í™€):</span>
                <span class="par-summary-value">Par ${inPar} / Blue ${inDistBlue}m / White ${inDistWhite}m</span>
              </div>
            ` : ''}
            <div class="par-summary-row total">
              <span class="par-summary-label">Total:</span>
              <span class="par-summary-value">Par ${totalPar} / Blue ${totalDistBlue}m / White ${totalDistWhite}m</span>
            </div>
          </div>

          <div class="subsection-title">Out (1-9í™€)</div>
          
          <div class="holes-header">
            <div>í™€</div>
            <div>Par</div>
            <div>Blue(m)</div>
            <div>White(m)</div>
          </div>

          ${course.par.slice(0, 9).map((par, i) => `
            <div class="hole-row">
              <div class="hole-number">${i+1}</div>
              <select onchange="updateHoleParNoRender(${i}, parseInt(this.value))">
                <option value="3" ${par === 3 ? 'selected' : ''}>3</option>
                <option value="4" ${par === 4 ? 'selected' : ''}>4</option>
                <option value="5" ${par === 5 ? 'selected' : ''}>5</option>
              </select>
              <input type="number" value="${course.distances.blue[i] || ''}" 
                oninput="updateHoleDistanceNoRender(${i}, 'blue', parseInt(this.value) || 0)"
                placeholder="Blue">
              <input type="number" value="${course.distances.white[i] || ''}" 
                oninput="updateHoleDistanceNoRender(${i}, 'white', parseInt(this.value) || 0)"
                placeholder="White">
            </div>
          `).join('')}

          ${course.holes === 18 ? `
            <div class="section-divider"></div>
            <div class="subsection-title">In (10-18í™€)</div>
            
            <div class="holes-header">
              <div>í™€</div>
              <div>Par</div>
              <div>Blue(m)</div>
              <div>White(m)</div>
            </div>

            ${course.par.slice(9, 18).map((par, i) => {
              const holeIdx = i + 9;
              return `
                <div class="hole-row">
                  <div class="hole-number">${holeIdx + 1}</div>
                  <select onchange="updateHoleParNoRender(${holeIdx}, parseInt(this.value))">
                    <option value="3" ${par === 3 ? 'selected' : ''}>3</option>
                    <option value="4" ${par === 4 ? 'selected' : ''}>4</option>
                    <option value="5" ${par === 5 ? 'selected' : ''}>5</option>
                  </select>
                  <input type="number" value="${course.distances.blue[holeIdx] || ''}" 
                    oninput="updateHoleDistanceNoRender(${holeIdx}, 'blue', parseInt(this.value) || 0)"
                    placeholder="Blue">
                  <input type="number" value="${course.distances.white[holeIdx] || ''}" 
                    oninput="updateHoleDistanceNoRender(${holeIdx}, 'white', parseInt(this.value) || 0)"
                    placeholder="White">
                </div>
              `;
            }).join('')}
          ` : ''}

          <button class="primary-btn" onclick="saveCourseAndRefresh()" 
            ${!course.name ? 'disabled' : ''}>
            ${appState.editingCourse ? 'ìˆ˜ì • ì™„ë£Œ' : 'ì½”ìŠ¤ ì €ì¥'}
          </button>
        </div>
      `;

      modal.onclick = (e) => {
        if (e.target === modal) closeCourseModal();
      };

      return modal;
    }

    window.updateNewCourse = function(field, value) {
      appState.newCourse[field] = value;
      if (field === 'holes') {
        const holes = parseInt(value);
        appState.newCourse.par = new Array(holes).fill(4);
        appState.newCourse.distances = {
          blue: new Array(holes).fill(0),
          white: new Array(holes).fill(0)
        };
      }
      render();
    };

    window.updateNewCourseNoRender = function(field, value) {
      appState.newCourse[field] = value;
      updateParSummary();
    };

    window.updateHoleParNoRender = function(index, value) {
      appState.newCourse.par[index] = value;
      updateParSummary();
    };

    window.updateHoleDistanceNoRender = function(index, teeBox, value) {
      appState.newCourse.distances[teeBox][index] = value;
      updateParSummary();
    };

    function updateParSummary() {
      const course = appState.newCourse;
      const outPar = course.par.slice(0, 9).reduce((a,b) => a+b, 0);
      const inPar = course.holes === 18 ? course.par.slice(9, 18).reduce((a,b) => a+b, 0) : 0;
      const totalPar = course.par.reduce((a,b) => a+b, 0);
      
      const outDistBlue = course.distances.blue.slice(0, 9).reduce((a,b) => a+b, 0);
      const inDistBlue = course.holes === 18 ? course.distances.blue.slice(9, 18).reduce((a,b) => a+b, 0) : 0;
      const totalDistBlue = course.distances.blue.reduce((a,b) => a+b, 0);
      
      const outDistWhite = course.distances.white.slice(0, 9).reduce((a,b) => a+b, 0);
      const inDistWhite = course.holes === 18 ? course.distances.white.slice(9, 18).reduce((a,b) => a+b, 0) : 0;
      const totalDistWhite = course.distances.white.reduce((a,b) => a+b, 0);
      
      const summaryElement = document.querySelector('.par-summary');
      if (summaryElement) {
        summaryElement.innerHTML = `
          <div class="par-summary-row">
            <span class="par-summary-label">Out (1-9í™€):</span>
            <span class="par-summary-value">Par ${outPar} / Blue ${outDistBlue}m / White ${outDistWhite}m</span>
          </div>
          ${course.holes === 18 ? `
            <div class="par-summary-row">
              <span class="par-summary-label">In (10-18í™€):</span>
              <span class="par-summary-value">Par ${inPar} / Blue ${inDistBlue}m / White ${inDistWhite}m</span>
            </div>
          ` : ''}
          <div class="par-summary-row total">
            <span class="par-summary-label">Total:</span>
            <span class="par-summary-value">Par ${totalPar} / Blue ${totalDistBlue}m / White ${totalDistWhite}m</span>
          </div>
        `;
      }
    }

    window.saveCourseAndRefresh = function() {
      if (appState.newCourse.name) {
        if (appState.editingCourse) {
          const index = appState.data.courses.findIndex(c => c.id === appState.editingCourse);
          if (index !== -1) {
            appState.data.courses[index] = {...appState.newCourse};
          }
        } else {
          appState.data.courses.push({...appState.newCourse});
        }
        saveData();
        closeCourseModal();
        render();
      }
    };

    // ========================================
    // PAR INPUT (ìƒˆ ì½”ìŠ¤ì¼ ë•Œ ê±°ë¦¬ë„ ì…ë ¥)
    // ========================================
    function renderParInput(container) {
      const isNewCourse = appState.isNewCourseRound;
      const holeIndex = appState.currentHole - 1;
      
      let defaultPar = 4;
      let defaultDistance = '';
      
      // ê¸°ì¡´ ì½”ìŠ¤ì˜ ê²½ìš°
      if (!isNewCourse && appState.activeRound.courseId !== 'new_course') {
        const course = appState.data.courses.find(c => c.id === appState.activeRound.courseId);
        if (course && course.par && course.par[holeIndex]) {
          defaultPar = course.par[holeIndex];
          if (course.distances && course.distances[appState.selectedTeeBox]) {
            defaultDistance = course.distances[appState.selectedTeeBox][holeIndex] || '';
          }
        }
      }

      const holesPlayed = appState.activeRound.holes.length;

      container.innerHTML = `
        <h1 class="page-title">Hole ${appState.currentHole}</h1>

        ${holesPlayed > 0 ? `
          <div class="round-control-panel">
            <div class="round-info">
              ${holesPlayed}/18 í™€ ì™„ë£Œ
            </div>
            <button class="finish-round-btn" onclick="finishRoundManually()">
              ë¼ìš´ë“œ ì¢…ë£Œ
            </button>
          </div>
        ` : ''}
        
        <div class="section">
          <h2 class="section-title">í™€ ì •ë³´</h2>
          
          ${isNewCourse ? `
            <div class="info-box">
              ğŸ’¡ ë¼ìš´ë“œí•˜ë©´ì„œ ì½”ìŠ¤ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
            </div>
          ` : `
            <div class="info-box">
              ${defaultPar && defaultDistance ? 
                `âœ“ Par ${defaultPar} â€¢ ${defaultDistance}m` : 
                'ğŸ’¡ í™€ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.'
              }
            </div>
          `}

          <div class="input-section">
            <label>Par</label>
            <div class="button-group-3">
              <button class="choice-btn ${appState.holePar === 3 || (!appState.holePar && defaultPar === 3) ? 'selected' : ''}" 
                onclick="setTempPar(3)">Par 3</button>
              <button class="choice-btn ${appState.holePar === 4 || (!appState.holePar && defaultPar === 4) ? 'selected' : ''}" 
                onclick="setTempPar(4)">Par 4</button>
              <button class="choice-btn ${appState.holePar === 5 || (!appState.holePar && defaultPar === 5) ? 'selected' : ''}" 
                onclick="setTempPar(5)">Par 5</button>
            </div>
          </div>

          <div class="input-section">
            <label>ê±°ë¦¬ (ë¯¸í„°) ${isNewCourse ? '' : '<span class="optional-label">(ì§ì ‘ ì…ë ¥ ê°€ëŠ¥)</span>'}</label>
            <input type="number" class="text-input" id="hole-distance-input"
              value="${appState.holeDistance || defaultDistance}" 
              placeholder="ì˜ˆ: 350">
          </div>

          <button class="primary-btn" onclick="confirmParAndDistance()">
            ìƒ· ì…ë ¥ ì‹œì‘
          </button>
        </div>
      `;

      if (!appState.holePar) appState.holePar = defaultPar;
      if (!appState.holeDistance) appState.holeDistance = defaultDistance;
    }

    window.setTempPar = function(par) {
      appState.holePar = par;
      // render() ëŒ€ì‹  ë²„íŠ¼ ìŠ¤íƒ€ì¼ë§Œ ì—…ë°ì´íŠ¸
      document.querySelectorAll('.choice-btn').forEach(btn => {
        btn.classList.remove('selected');
      });
      event.target.classList.add('selected');
    };

    window.confirmParAndDistance = function() {
      const distanceInput = document.getElementById('hole-distance-input');
      const distance = distanceInput ? distanceInput.value : '';
      
      if (!appState.holePar) appState.holePar = 4;
      appState.holeDistance = distance;

      // ìƒˆ ì½”ìŠ¤ì¸ ê²½ìš° ë°ì´í„° ì €ì¥
      if (appState.isNewCourseRound) {
        const holeIndex = appState.currentHole - 1;
        appState.newCourseData.par[holeIndex] = appState.holePar;
        appState.newCourseData.distances[appState.selectedTeeBox][holeIndex] = parseInt(distance) || 0;
      }

      // ìƒ· ì…ë ¥ ì‹œì‘
      startTeeShot();
    };

    window.finishRoundManually = function() {
      if (confirm('ë¼ìš´ë“œë¥¼ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        finishRound();
      }
    };

    function finishRound() {
      appState.activeRound.status = 'completed';
      appState.data.rounds.push(appState.activeRound);
      
      // ìƒˆ ì½”ìŠ¤ì˜€ë‹¤ë©´ ì½”ìŠ¤ ë“±ë¡
      if (appState.isNewCourseRound && appState.newCourseData) {
        // ë‚˜ë¨¸ì§€ í™€ ë°ì´í„° ì±„ìš°ê¸° (ì…ë ¥ ì•ˆ í•œ í™€ì€ Par 4, 0më¡œ)
        while (appState.newCourseData.par.length < 18) {
          appState.newCourseData.par.push(4);
          appState.newCourseData.distances[appState.selectedTeeBox].push(0);
        }
        
        appState.data.courses.push(appState.newCourseData);
      }
      
      saveData();
      
      appState.showRoundSummaryModal = true;
      render();
    }

    // ========================================
    // SHOT TYPE & START
    // ========================================
    function startTeeShot() {
      const isPar3 = appState.holePar === 3;
      
      appState.currentShot = {
        number: appState.shots.length + 1,
        type: 'tee',
        club: '',
        distance: isPar3 ? (appState.holeDistance || '') : null,
        shotType: null,
        result: {
          landing: '',
          shape: '',
          miss: [],
          onGreen: null,
          direction: []
        }
      };
      render();
    }

    // ========================================
    // SHOT INPUT (í…ŒìŠ¤íŠ¸1 í”¼ë“œë°± ì™„ì „ ë°˜ì˜)
    // ========================================
    function renderShotInput(container) {
      const shot = appState.currentShot;
      const isTeeShot = shot.type === 'tee';
      const isPar3 = appState.holePar === 3;
      const isPar4or5 = appState.holePar === 4 || appState.holePar === 5;
      const isShortGame = shot.type === 'short';
      
      // Par 3ëŠ” ê±°ë¦¬ í•„ìš”, Par 4/5 í‹°ìƒ·ì€ ê±°ë¦¬ ë¶ˆí•„ìš”
      const needsDistance = (isTeeShot && isPar3) || !isTeeShot;
      
      // ì¶”ì²œ í´ëŸ½
      const recommendedClub = (needsDistance && shot.distance) ? getRecommendedClub(shot.distance) : null;

      // Par 4/5 í‹°ìƒ·ì€ ì˜¨ê·¸ë¦°/ë°©í–¥ ì„ íƒ ìˆ¨ê¹€
      const showGreenSelection = !(isTeeShot && isPar4or5);

      // ë¯¸ìŠ¤ íŒ¨í„´ì€ í˜ì–´ì›¨ì´ê°€ ì•„ë‹ ë•Œë§Œ
      const showMissPattern = isTeeShot && shot.result.landing && shot.result.landing !== 'fairway';

      container.innerHTML = `
        <div class="shot-header">
          <div class="shot-info">
            <span class="hole-num">Hole ${appState.currentHole} - Par ${appState.holePar}</span>
            <span class="tee-badge ${appState.selectedTeeBox}">
              ${appState.selectedTeeBox === 'blue' ? 'Blue' : 'White'}
            </span>
            ${appState.holeDistance ? `<span class="distance-badge">${appState.holeDistance}m</span>` : ''}
          </div>
          <div class="shot-number">ìƒ· #${shot.number}${isTeeShot ? ' - í‹°ìƒ·' : isShortGame ? ' - ìˆê²Œì„' : ' - ì–´í”„ë¡œì¹˜'}</div>
        </div>

        ${appState.shots.length > 0 ? `
          <div class="previous-shots">
            <strong>ì´ì „ ìƒ·:</strong><br>
            ${appState.shots.map((s, i) => {
              const clubName = CLUBS.find(c => c.id === s.club)?.name || '';
              const resultText = s.result.onGreen ? 'ì˜¨ê·¸ë¦°' : s.result.landing || 'ì˜¤í”„';
              return `âœ“ #${i + 1}: ${clubName}${s.distance ? ` ${s.distance}m` : ''} â†’ ${resultText}`;
            }).join('<br>')}
          </div>
        ` : ''}

        ${needsDistance ? `
          <div class="section">
            <div class="input-section">
              <label>ë‚¨ì€ ê±°ë¦¬ (ë¯¸í„°)</label>
              <input type="number" class="text-input" id="distance-input"
                value="${shot.distance || ''}" 
                placeholder="ì˜ˆ: 150">
            </div>

            ${recommendedClub ? `
              <div class="club-recommendation">
                ğŸ’¡ ì¶”ì²œ: ${recommendedClub.name} (í‰ê·  ${CLUB_DISTANCES[recommendedClub.id].total}m)
              </div>
            ` : ''}
          </div>
        ` : ''}

        <div class="section">
          <div class="input-section">
            <label>í´ëŸ½ ì„ íƒ</label>
            <select class="select-input" onchange="selectClub(this.value)">
              <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              ${CLUBS.map(club => {
                const dist = CLUB_DISTANCES[club.id];
                const distText = dist.total > 0 ? ` (${dist.total}m)` : '';
                const selected = shot.club === club.id ? 'selected' : '';
                return `<option value="${club.id}" ${selected}>${club.name}${distText}</option>`;
              }).join('')}
            </select>
          </div>

          ${!isTeeShot && appState.shots.length >= 2 ? `
            <div class="input-section">
              <label>ìƒ· íƒ€ì…</label>
              <div class="button-group">
                <button class="choice-btn ${shot.type === 'approach' ? 'selected' : ''}" 
                  onclick="changeShotType('approach')">
                  ì–´í”„ë¡œì¹˜
                </button>
                <button class="choice-btn ${shot.type === 'short' ? 'selected' : ''}" 
                  onclick="changeShotType('short')">
                  ìˆê²Œì„
                </button>
              </div>
            </div>
          ` : ''}

          ${isTeeShot && isPar4or5 ? `
            <div class="input-section">
              <label>ì°©ì§€ ì§€ì </label>
              <div class="button-group-3">
                <button class="choice-btn ${shot.result.landing === 'fairway' ? 'selected' : ''}" 
                  onclick="setLanding('fairway')">í˜ì–´ì›¨ì´</button>
                <button class="choice-btn ${shot.result.landing === 'rough-left' ? 'selected' : ''}" 
                  onclick="setLanding('rough-left')">ì¢Œì¸¡ ëŸ¬í”„</button>
                <button class="choice-btn ${shot.result.landing === 'rough-right' ? 'selected' : ''}" 
                  onclick="setLanding('rough-right')">ìš°ì¸¡ ëŸ¬í”„</button>
              </div>
              <div class="button-group" style="margin-top: 8px;">
                <button class="choice-btn ${shot.result.landing === 'ob' ? 'selected' : ''}" 
                  onclick="setLanding('ob')">OB</button>
                <button class="choice-btn ${shot.result.landing === 'hazard' ? 'selected' : ''}" 
                  onclick="setLanding('hazard')">í•´ì €ë“œ</button>
              </div>
            </div>
          ` : ''}

          ${isShortGame ? `
            <div class="input-section">
              <label>ìœ„ì¹˜</label>
              <div class="button-group">
                <button class="choice-btn ${shot.result.location === 'front' ? 'selected' : ''}" 
                  onclick="setLocation('front')">ê·¸ë¦° ì•</button>
                <button class="choice-btn ${shot.result.location === 'side' ? 'selected' : ''}" 
                  onclick="setLocation('side')">ê·¸ë¦° ì˜†</button>
              </div>
              <div class="button-group" style="margin-top: 8px;">
                <button class="choice-btn ${shot.result.location === 'bunker' ? 'selected' : ''}" 
                  onclick="setLocation('bunker')">ë²™ì»¤</button>
                <button class="choice-btn ${shot.result.location === 'rough' ? 'selected' : ''}" 
                  onclick="setLocation('rough')">ëŸ¬í”„</button>
              </div>
            </div>
          ` : ''}

          <div class="input-section">
            <label>êµ¬ì§ˆ</label>
            <div class="button-group-3">
              <button class="choice-btn ${shot.result.shape === 'straight' ? 'selected' : ''}" 
                onclick="setShape('straight')">ìŠ¤íŠ¸ë ˆì´íŠ¸</button>
              <button class="choice-btn ${shot.result.shape === 'draw' ? 'selected' : ''}" 
                onclick="setShape('draw')">ë“œë¡œìš°</button>
              <button class="choice-btn ${shot.result.shape === 'fade' ? 'selected' : ''}" 
                onclick="setShape('fade')">í˜ì´ë“œ</button>
            </div>
          </div>

          ${showMissPattern ? `
            <div class="input-section">
              <label>ë¯¸ìŠ¤ íŒ¨í„´ <span class="optional-label">(ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</span></label>
              <div class="checkbox-group">
                ${['hook', 'slice', 'push', 'pull', 'top'].map(miss => {
                  const labels = { hook: 'í›…', slice: 'ìŠ¬ë¼ì´ìŠ¤', push: 'í‘¸ì‰¬', pull: 'í’€', top: 'íƒ‘ë³¼' };
                  const isSelected = shot.result.miss && shot.result.miss.includes(miss);
                  return `
                    <div class="checkbox-label ${isSelected ? 'selected' : ''}" 
                      onclick="toggleMiss('${miss}')">
                      ${labels[miss]}
                    </div>
                  `;
                }).join('')}
              </div>
            </div>
          ` : ''}

          ${showGreenSelection ? `
            <div class="input-section">
              <label>ì˜¨ê·¸ë¦° ì—¬ë¶€</label>
              <div class="button-group">
                <button class="choice-btn ${shot.result.onGreen === true ? 'selected' : ''}" 
                  onclick="setOnGreen(true)">ì˜¨ê·¸ë¦° âœ“</button>
                <button class="choice-btn ${shot.result.onGreen === false ? 'selected' : ''}" 
                  onclick="setOnGreen(false)">ê·¸ë¦° ë¯¸ìŠ¤</button>
              </div>
            </div>

            ${shot.result.onGreen !== null ? `
              <div class="input-section">
                <label>${shot.result.onGreen ? 'í•€ ìœ„ì¹˜ ëŒ€ë¹„' : 'ê²°ê³¼'} <span class="optional-label">(ë³µìˆ˜ ì„ íƒ)</span></label>
                <div class="checkbox-group">
                  ${['short', 'long', 'left', 'right', 'within1m'].map(dir => {
                    const labels = { short: 'ì§§ìŒ', long: 'ê¹€', left: 'ì¢Œì¸¡', right: 'ìš°ì¸¡', within1m: '1m ì´ë‚´' };
                    const isSelected = shot.result.direction && shot.result.direction.includes(dir);
                    return `
                      <div class="checkbox-label ${isSelected ? 'selected' : ''}" 
                        onclick="toggleDirection('${dir}')">
                        ${labels[dir]}
                      </div>
                    `;
                  }).join('')}
                </div>
              </div>
            ` : ''}
          ` : ''}
        </div>

        <button class="primary-btn" 
          ${!canCompleteShot() ? 'disabled' : ''} 
          onclick="completeShot()">
          ${shot.result.onGreen ? 'í¼íŒ… ì…ë ¥ìœ¼ë¡œ â†’' : 'ë‹¤ìŒ ìƒ·ìœ¼ë¡œ â†’'}
        </button>
      `;

      // ê±°ë¦¬ ì…ë ¥ ì´ë²¤íŠ¸ (onchangeë¡œ ë³€ê²½)
      setTimeout(() => {
        const distInput = document.getElementById('distance-input');
        if (distInput) {
          distInput.onchange = function() {
            appState.currentShot.distance = this.value;
            render();
          };
        }
      }, 0);
    }

    window.selectClub = function(clubId) {
      appState.currentShot.club = clubId;
      render();
    };

    window.changeShotType = function(type) {
      appState.currentShot.type = type;
      render();
    };

    window.setLanding = function(type) {
      appState.currentShot.result.landing = type;
      render();
    };

    window.setLocation = function(loc) {
      appState.currentShot.result.location = loc;
      render();
    };

    window.setShape = function(shape) {
      appState.currentShot.result.shape = shape;
      render();
    };

    window.toggleMiss = function(miss) {
      if (!appState.currentShot.result.miss) {
        appState.currentShot.result.miss = [];
      }
      const index = appState.currentShot.result.miss.indexOf(miss);
      if (index > -1) {
        appState.currentShot.result.miss.splice(index, 1);
      } else {
        appState.currentShot.result.miss.push(miss);
      }
      // render() í˜¸ì¶œë¡œ ì „ì²´ í™”ë©´ ì—…ë°ì´íŠ¸
      render();
    };

    window.setOnGreen = function(value) {
      appState.currentShot.result.onGreen = value;
      // ì˜¨ê·¸ë¦° ì—¬ë¶€ ë³€ê²½ ì‹œ ë°©í–¥ ì´ˆê¸°í™”
      appState.currentShot.result.direction = [];
      render();
    };

    window.toggleDirection = function(dir) {
      if (!appState.currentShot.result.direction) {
        appState.currentShot.result.direction = [];
      }
      const index = appState.currentShot.result.direction.indexOf(dir);
      if (index > -1) {
        appState.currentShot.result.direction.splice(index, 1);
      } else {
        appState.currentShot.result.direction.push(dir);
      }
      // render() í˜¸ì¶œë¡œ ì „ì²´ í™”ë©´ ì—…ë°ì´íŠ¸
      render();
    };

    function canCompleteShot() {
      const shot = appState.currentShot;
      const isTeeShot = shot.type === 'tee';
      const isPar3 = appState.holePar === 3;
      const isPar4or5 = appState.holePar === 4 || appState.holePar === 5;
      const needsDistance = (isTeeShot && isPar3) || !isTeeShot;
      
      if (!shot.club) return false;
      if (needsDistance && !shot.distance) return false;
      if (isTeeShot && isPar4or5 && !shot.result.landing) return false;
      
      // Par 4/5 í‹°ìƒ·ì€ ì˜¨ê·¸ë¦° ì²´í¬ ì•ˆ í•¨
      const showGreenSelection = !(isTeeShot && isPar4or5);
      if (showGreenSelection && shot.result.onGreen === null) return false;
      
      return true;
    }

    window.completeShot = function() {
      if (!canCompleteShot()) return;

      // ê±°ë¦¬ ì…ë ¥ê°’ ìµœì¢… ë°˜ì˜
      const distInput = document.getElementById('distance-input');
      if (distInput) {
        appState.currentShot.distance = distInput.value;
      }

      appState.shots.push({...appState.currentShot});

      const isTeeShot = appState.currentShot.type === 'tee';
      const isPar4or5 = appState.holePar === 4 || appState.holePar === 5;

      // Par 4/5 í‹°ìƒ·ì€ ë¬´ì¡°ê±´ ë‹¤ìŒ ìƒ·ìœ¼ë¡œ
      if (isTeeShot && isPar4or5) {
        const nextShotNumber = appState.shots.length + 1;
        appState.currentShot = {
          number: nextShotNumber,
          type: 'approach',
          club: '',
          distance: '',
          shotType: 'approach',
          result: {
            landing: '',
            location: '',
            onGreen: null,
            direction: [],
            shape: '',
            miss: []
          }
        };
        render();
        return;
      }

      // ì˜¨ê·¸ë¦°ì´ë©´ í¼íŒ…ìœ¼ë¡œ
      if (appState.currentShot.result.onGreen) {
        appState.puttingData = {
          putts: 2
        };
        appState.currentShot = null;
      } else {
        // ì˜¨ê·¸ë¦° ì‹¤íŒ¨ë©´ ë‹¤ìŒ ìƒ·
        const nextShotNumber = appState.shots.length + 1;
        const lastShot = appState.shots[appState.shots.length - 1];
        
        // ìƒ· #3ë¶€í„°ëŠ” íƒ€ì… ì„ íƒ ê°€ëŠ¥
        const shotType = appState.shots.length >= 2 ? 'approach' : 'approach';
        
        appState.currentShot = {
          number: nextShotNumber,
          type: shotType,
          club: '',
          distance: '',
          shotType: 'approach',
          result: {
            landing: '',
            location: '',
            onGreen: null,
            direction: [],
            shape: '',
            miss: []
          }
        };
      }
      
      render();
    };

    // ========================================
    // PUTTING INPUT (í¼íŒ… ìˆ˜ë§Œ ì…ë ¥ - í…ŒìŠ¤íŠ¸1 í”¼ë“œë°±)
    // ========================================
    function renderPuttingInput(container) {
      const putting = appState.puttingData;

      container.innerHTML = `
        <div class="shot-header">
          <div class="shot-info">
            <span class="hole-num">Hole ${appState.currentHole} - Par ${appState.holePar}</span>
            <span class="tee-badge ${appState.selectedTeeBox}">
              ${appState.selectedTeeBox === 'blue' ? 'Blue' : 'White'}
            </span>
          </div>
          <div class="shot-number">â›³ í¼íŒ…</div>
        </div>

        ${appState.shots.length > 0 ? `
          <div class="previous-shots">
            <strong>ì´ì „ ìƒ·:</strong><br>
            ${appState.shots.map((s, i) => {
              const clubName = CLUBS.find(c => c.id === s.club)?.name || '';
              return `âœ“ #${i + 1}: ${clubName} â†’ ì˜¨ê·¸ë¦°`;
            }).join('<br>')}
          </div>
        ` : ''}

        <div class="section">
          <div class="input-section">
            <label>í¼íŒ… ìˆ˜</label>
            <select class="select-input" onchange="setPuttCount(parseInt(this.value))">
              ${[1, 2, 3, 4, 5].map(n => 
                `<option value="${n}" ${putting.putts === n ? 'selected' : ''}>${n}í¼íŠ¸</option>`
              ).join('')}
            </select>
          </div>
        </div>

        <button class="primary-btn" onclick="completePutting()">
          í™€ ì™„ë£Œ â†’ ë‹¤ìŒ í™€ë¡œ
        </button>
      `;
    }

    window.setPuttCount = function(count) {
      appState.puttingData.putts = count;
      render();
    };

    window.completePutting = function() {
      const totalShots = appState.shots.length + appState.puttingData.putts;
      
      const holeData = {
        number: appState.currentHole,
        par: appState.holePar,
        distance: appState.holeDistance,
        shots: [...appState.shots],
        putting: {...appState.puttingData},
        score: totalShots
      };

      appState.activeRound.holes.push(holeData);
      saveData();

      // 18í™€ ì™„ë£Œ ì²´í¬
      if (appState.activeRound.holes.length >= 18) {
        finishRound();
        return;
      }

      // ë‹¤ìŒ í™€ë¡œ
      appState.currentHole++;
      appState.holePar = null;
      appState.holeDistance = '';
      appState.shots = [];
      appState.currentShot = null;
      appState.puttingData = null;

      render();
    };

    // ========================================
    // ROUND SUMMARY MODAL
    // ========================================
    function renderRoundSummaryModal() {
      const modal = document.createElement('div');
      modal.className = 'modal active';
      
      const round = appState.activeRound;
      const totalScore = round.holes.reduce((sum, h) => sum + h.score, 0);
      const totalPar = round.holes.reduce((sum, h) => sum + h.par, 0);
      const scoreToPar = totalScore - totalPar;

      modal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title">ğŸ‰ ë¼ìš´ë“œ ì™„ë£Œ!</h2>
          </div>

          <div style="text-align: center; margin-bottom: 24px;">
            <div style="font-size: 48px; font-weight: 700; color: var(--green-primary);">
              ${totalScore}
            </div>
            <div style="font-size: 24px; margin-top: 8px;">
              ${scoreToPar > 0 ? '+' : ''}${scoreToPar}
            </div>
          </div>

          <div style="text-align: center; margin-bottom: 16px; opacity: 0.8;">
            ${round.course} â€¢ ${appState.selectedTeeBox === 'blue' ? 'ğŸ”µ Blue' : 'âšª White'}
          </div>

          ${appState.isNewCourseRound ? `
            <div class="info-box" style="margin-bottom: 16px;">
              âœ“ ìƒˆ ì½”ìŠ¤ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!
            </div>
          ` : ''}

          <button class="primary-btn" onclick="closeRoundSummary()">
            ê¸°ë¡ í™•ì¸í•˜ê¸°
          </button>
        </div>
      `;

      modal.onclick = (e) => {
        if (e.target === modal) closeRoundSummary();
      };

      return modal;
    }

    window.closeRoundSummary = function() {
      appState.showRoundSummaryModal = false;
      appState.activeRound = null;
      appState.currentHole = 1;
      appState.isNewCourseRound = false;
      appState.newCourseData = null;
      appState.currentPage = 3;
      render();
    };

    // ========================================
    // STATS PAGE
    // ========================================
    function renderStatsPage(container) {
      const completedRounds = appState.data.rounds.filter(r => r.status === 'completed');
      
      if (completedRounds.length === 0) {
        container.innerHTML = `
          <h1 class="page-title">ğŸ“Š í†µê³„</h1>
          <div class="empty-state">
            <p>ì•„ì§ ì™„ë£Œëœ ë¼ìš´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
            <p>ë¼ìš´ë“œë¥¼ ì™„ë£Œí•˜ë©´ í†µê³„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
        `;
        return;
      }

      const recentRounds = completedRounds.slice(-10);
      const totalHoles = recentRounds.reduce((sum, r) => sum + r.holes.length, 0);
      
      const avgScore = (recentRounds.reduce((sum, r) => {
        return sum + r.holes.reduce((s, h) => s + h.score, 0);
      }, 0) / recentRounds.length).toFixed(1);

      // í‹°ìƒ· ì •í™•ë„
      const teeShots = recentRounds.flatMap(r => 
        r.holes.filter(h => h.shots.length > 0).map(h => h.shots[0])
      );
      const fairwayHits = teeShots.filter(s => s.result.landing === 'fairway').length;
      const teeShotAccuracy = teeShots.length > 0 ? ((fairwayHits / teeShots.length) * 100).toFixed(0) : 0;

      // GIR
      const girCount = recentRounds.flatMap(r => r.holes).filter(h => {
        const shotsToGreen = h.shots.findIndex(s => s.result.onGreen);
        return shotsToGreen !== -1 && (shotsToGreen + 1) <= h.par - 2;
      }).length;
      const girPercentage = totalHoles > 0 ? ((girCount / totalHoles) * 100).toFixed(0) : 0;

      // í‰ê·  í¼íŒ…
      const totalPutts = recentRounds.reduce((sum, r) => 
        sum + r.holes.reduce((s, h) => s + (h.putting?.putts || 0), 0), 0
      );
      const avgPutts = recentRounds.length > 0 ? (totalPutts / recentRounds.length).toFixed(1) : 0;

      container.innerHTML = `
        <h1 class="page-title">ğŸ“Š í†µê³„</h1>
        <p style="opacity: 0.7; margin-bottom: 24px;">ìµœê·¼ ${recentRounds.length}ë¼ìš´ë“œ</p>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-label">í‰ê·  ìŠ¤ì½”ì–´</div>
            <div class="stat-value">${avgScore}</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">ğŸŒï¸</div>
            <div class="stat-label">í‹°ìƒ· ì •í™•ë„</div>
            <div class="stat-value">${teeShotAccuracy}%</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-label">íŒŒì˜¨ìœ¨ (GIR)</div>
            <div class="stat-value">${girPercentage}%</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">â›³</div>
            <div class="stat-label">í‰ê·  í¼íŒ…</div>
            <div class="stat-value">${avgPutts}</div>
          </div>
        </div>

        <div class="section">
          <h2 class="section-title">í´ëŸ½ë³„ í‰ê·  ê±°ë¦¬</h2>
          <div class="club-list">
            ${CLUBS.filter(c => CLUB_DISTANCES[c.id].total > 0).map(club => `
              <div class="club-item">
                ${club.name}: ${CLUB_DISTANCES[club.id].total}m
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    // ========================================
    // HISTORY PAGE
    // ========================================
    function renderHistoryPage(container) {
      const completedRounds = appState.data.rounds.filter(r => r.status === 'completed');

      if (completedRounds.length === 0) {
        container.innerHTML = `
          <h1 class="page-title">ğŸ“‹ ê¸°ë¡</h1>
          <div class="empty-state">
            <p>ì•„ì§ ì™„ë£Œëœ ë¼ìš´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          </div>
        `;
        return;
      }

      container.innerHTML = `
        <h1 class="page-title">ğŸ“‹ ë¼ìš´ë“œ ê¸°ë¡</h1>
        
        <div class="rounds-list">
          ${completedRounds.reverse().map(round => {
            const totalScore = round.holes.reduce((sum, h) => sum + h.score, 0);
            const totalPar = round.holes.reduce((sum, h) => sum + h.par, 0);
            const scoreToPar = totalScore - totalPar;
            const teeBox = round.teeBox === 'blue' ? 'ğŸ”µ' : 'âšª';
            
            return `
              <div class="round-card">
                <div class="round-header-info">
                  <h3>${round.course} ${teeBox}</h3>
                  <span class="round-date">
                    ${new Date(round.date).toLocaleDateString('ko-KR')} â€¢ ${round.holes.length}í™€
                  </span>
                </div>
                <div class="round-score-info">
                  <div class="total-score">${totalScore}</div>
                  <div style="font-size: 16px; color: var(--brown); opacity: 0.7;">
                    ${scoreToPar > 0 ? `+${scoreToPar}` : scoreToPar}
                  </div>
                </div>
              </div>
            `;
          }).join('')}
        </div>
      `;
    }

    // ========================================
    // SETTINGS PAGE
    // ========================================
    function renderSettingsPage(container) {
      container.innerHTML = `
        <h1 class="page-title">âš™ï¸ ì„¤ì •</h1>
        
        <div class="section">
          <h2 class="section-title">ë“±ë¡ëœ ì½”ìŠ¤ ê´€ë¦¬</h2>
          <p style="margin-bottom: 16px; opacity: 0.8;">
            ì´ ${appState.data.courses.length}ê°œ ì½”ìŠ¤ ë“±ë¡ë¨
          </p>
          
          ${appState.data.courses.map(course => {
            const totalPar = course.par.reduce((a,b) => a+b, 0);
            return `
              <div class="course-btn" style="margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center;">
                <div class="course-info">
                  <div class="course-name">${course.name}</div>
                  <div class="course-details">${course.location || 'ìœ„ì¹˜ ë¯¸ë“±ë¡'} â€¢ ${course.holes}í™€ â€¢ Par ${totalPar}</div>
                </div>
                <div class="btn-group">
                  <button class="edit-btn" onclick="openCourseEdit('${course.id}')">ìˆ˜ì •</button>
                  <button class="delete-btn" onclick="deleteCourse('${course.id}')">ì‚­ì œ</button>
                </div>
              </div>
            `;
          }).join('')}
          
          <button class="secondary-btn" onclick="openCourseRegistration()">
            â• ìƒˆ ì½”ìŠ¤ ë“±ë¡í•˜ê¸°
          </button>
        </div>

        <div class="section">
          <h2 class="section-title">ê³¨í”„ë°± êµ¬ì„± & ê±°ë¦¬ ì •ë³´</h2>
          <div class="club-list">
            ${CLUBS.map(club => {
              const dist = CLUB_DISTANCES[club.id];
              const distText = dist && dist.total > 0 ? ` (${dist.total}m)` : '';
              return `
                <div class="club-item">âœ“ ${club.name}${distText}</div>
              `;
            }).join('')}
          </div>
        </div>

        <div class="section">
          <h2 class="section-title">ë°ì´í„°</h2>
          <p style="margin-bottom: 12px; opacity: 0.8;">
            ì´ ${appState.data.rounds.length}ê°œ ë¼ìš´ë“œ ê¸°ë¡
          </p>
          <button class="primary-btn" style="background: var(--red);" onclick="clearAllData()">
            ëª¨ë“  ë°ì´í„° ì‚­ì œ
          </button>
        </div>

        <div class="section" style="text-align: center;">
          <h3 style="margin-bottom: 8px;">Golf Round Analyzer</h3>
          <p style="opacity: 0.6;">Version 9.0.0</p>
          <p style="opacity: 0.6;">í…ŒìŠ¤íŠ¸2 í”¼ë“œë°± ë°˜ì˜</p>
          <p style="opacity: 0.6; font-size: 12px; margin-top: 8px;">
            Par ì…ë ¥ ë¡œì§ ê°œì„  â€¢ ìƒ· í•„ë“œ ì´ˆê¸°í™” ìˆ˜ì •
          </p>
        </div>
      `;
    }

    window.deleteCourse = function(courseId) {
      if (confirm('ì´ ì½”ìŠ¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        appState.data.courses = appState.data.courses.filter(c => c.id !== courseId);
        saveData();
        render();
      }
    };

    window.clearAllData = function() {
      if (confirm('ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
        appState.data = { rounds: [], courses: [...DEFAULT_COURSES] };
        saveData();
        alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        render();
      }
    };

    // ========================================
    // PAGE ROUTING (for new course flow)
    // ========================================
    function renderByPage(container) {
      switch (appState.currentPage) {
        case 10: renderExistingCourseSelectionPage(container); break;
        case 11: renderNewCourseInputPage(container); break;
        case 12: renderTeeboxSelectionPage(container); break;
        default:
          render();
      }
    }

    // Override render for page routing
    const originalRender = render;
    render = function() {
      if (appState.currentPage >= 10 && appState.currentPage <= 12 && !appState.activeRound) {
        const app = document.getElementById('app');
        app.innerHTML = '';
        const container = document.createElement('div');
        container.className = 'page-container';
        renderByPage(container);
        app.appendChild(container);
        app.appendChild(renderBottomNav());
      } else {
        originalRender();
      }
    };

    // ========================================
    // INIT
    // ========================================
    loadData();
    render();
  </script>
</body>
</html>
